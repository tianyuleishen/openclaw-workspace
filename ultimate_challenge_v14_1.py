#!/usr/bin/env python3
"""
ç»ˆææŒ‘æˆ˜èµ› v14.1 å¼ºåŒ–ç‰ˆ
"""

import sys
sys.path.insert(0, '/home/admin/.openclaw/workspace')

from reasoning_engine_v14_enhanced import ReasoningEngineV14_1


def run_challenge():
    print("="*80)
    print("ğŸ¦„ğŸ¦„ Super Unicorn ç»ˆææŒ‘æˆ˜èµ› v14.1 å¼ºåŒ–ç‰ˆ")
    print("="*80)
    
    engine = ReasoningEngineV14_1()
    
    # ç»ˆææŒ‘æˆ˜é¢˜åº“
    challenges = [
        # ğŸ† æ•°å­¦æŒ‘æˆ˜
        {"q": "è¯æ˜é»æ›¼Î¶å‡½æ•°çš„éå¹³å‡¡é›¶ç‚¹éƒ½åœ¨Re(s)=1/2ç›´çº¿ä¸Šï¼Œè¿™æ˜¯é»æ›¼çŒœæƒ³çš„ç²¾ç¡®è¡¨è¿°", "a": "é»æ›¼çŒœæƒ³", "hints": ["é»æ›¼", "Î¶å‡½æ•°", "éå¹³å‡¡é›¶ç‚¹"]},
        {"q": "è®¾a,b,cä¸ºæ­£æ•´æ•°ï¼Œæ»¡è¶³aÂ³ + bÂ³ = cÂ³ã€‚è¯æ˜è¿™æ ·çš„æ­£æ•´æ•°è§£ä¸å­˜åœ¨", "a": "è´¹é©¬å¤§å®šç†n=3", "hints": ["è´¹é©¬", "aÂ³+bÂ³=cÂ³"]},
        {"q": "NPå®Œå…¨é—®é¢˜ä¸­ï¼ŒSATé—®é¢˜ä¸ºä»€ä¹ˆæ˜¯æœ€åŸºæœ¬çš„ï¼ŸCook-Levinå®šç†çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ", "a": "SATä¸NPå®Œå…¨", "hints": ["SAT", "NPå®Œå…¨", "Cook-Levin"]},
        {"q": "åº·æ‰˜å°”å¯¹è§’çº¿è®ºè¯ï¼šè¯æ˜å®æ•°é›†åˆçš„åŸºæ•°ä¸¥æ ¼å¤§äºè‡ªç„¶æ•°é›†åˆçš„åŸºæ•°", "a": "åº·æ‰˜å°”å¯¹è§’çº¿", "hints": ["åº·æ‰˜å°”", "å¯¹è§’çº¿", "åŸºæ•°"]},
        {"q": "ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•è¯æ˜è´¨æ•°æœ‰æ— ç©·å¤šä¸ª", "a": "è´¨æ•°æ— ç©·", "hints": ["è´¨æ•°", "æ— ç©·", "æ¬§å‡ é‡Œå¾—"]},
        {"q": "è¯æ˜äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log n)", "a": "äºŒåˆ†æŸ¥æ‰¾å¤æ‚åº¦", "hints": ["äºŒåˆ†æŸ¥æ‰¾", "O(log n)"]},
        
        # âš›ï¸ é‡å­æŒ‘æˆ˜
        {"q": "è´å°”ä¸ç­‰å¼|V|â‰¤2çš„ç‰©ç†æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿé‡å­åŠ›å­¦å¦‚ä½•è¿åå®ƒï¼Ÿ", "a": "è´å°”ä¸ç­‰å¼", "hints": ["è´å°”", "ä¸ç­‰å¼", "2.828"]},
        {"q": "é‡å­çº ç¼ æ€|ÏˆâºâŸ©=(|01âŸ©+|10âŸ©)/âˆš2çš„ç‰©ç†æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ç”¨å®ƒå®ç°é‡å­éšå½¢ä¼ æ€ï¼Ÿ", "a": "é‡å­çº ç¼ éšå½¢ä¼ æ€", "hints": ["éšå½¢ä¼ æ€", "Ïˆâº", "çº ç¼ "]},
        {"q": "Shorç®—æ³•å¦‚ä½•åœ¨å¤šé¡¹å¼æ—¶é—´å†…åˆ†è§£å¤§æ•´æ•°ï¼Ÿé‡å­ç›¸ä½ä¼°è®¡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ", "a": "Shorç®—æ³•", "hints": ["Shor", "é‡å­", "åˆ†è§£"]},
        
        # ğŸ§  æ·±åº¦å­¦ä¹ æŒ‘æˆ˜
        {"q": "Transformerä¸­Multi-Head Attentionçš„è®¡ç®—å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿä¸ºä»€ä¹ˆæ¯”RNNæ›´é€‚åˆå¹¶è¡Œï¼Ÿ", "a": "Transformerå¤æ‚åº¦", "hints": ["Transformer", "å¤æ‚åº¦", "O(nÂ²)"]},
        {"q": "GPT-4çš„Scaling Lawï¼šæ¨¡å‹æ€§èƒ½ä¸å‚æ•°è§„æ¨¡ã€æ•°æ®è§„æ¨¡ã€è®¡ç®—é‡çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ", "a": "Scaling Law", "hints": ["Scaling", "å®šå¾‹", "å¹‚å¾‹"]},
        {"q": "ResNetæ®‹å·®è¿æ¥çš„æ•°å­¦è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆèƒ½è§£å†³æ¢¯åº¦æ¶ˆå¤±ï¼Ÿ", "a": "æ®‹å·®è¿æ¥", "hints": ["ResNet", "æ®‹å·®", "æ¢¯åº¦"]},
        
        # ğŸ­ å“²å­¦æŒ‘æˆ˜
        {"q": "ç¼¸ä¸­ä¹‹è„‘æ€æƒ³å®éªŒï¼šå¦‚ä½•ä»è®¤è¯†è®ºè§’åº¦è®ºè¯æˆ‘ä»¬å¯èƒ½å°±æ˜¯ç¼¸ä¸­ä¹‹è„‘ï¼Ÿ", "a": "ç¼¸ä¸­ä¹‹è„‘", "hints": ["ç¼¸ä¸­ä¹‹è„‘", "è®¤è¯†è®º", "æ¨¡æ‹Ÿ"]},
        
        # ğŸ—ï¸ ç³»ç»Ÿè®¾è®¡æŒ‘æˆ˜
        {"q": "CAPå®šç†ï¼šåœ¨ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€åˆ†åŒºå®¹é”™æ€§ä¸­ï¼Œåªèƒ½åŒæ—¶æ»¡è¶³ä¸¤ä¸ªï¼Œä¸ºä»€ä¹ˆï¼Ÿ", "a": "CAPå®šç†", "hints": ["CAP", "ä¸€è‡´æ€§", "å¯ç”¨æ€§"]},
        {"q": "äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ï¼Œå¦‚ä½•ä¿è¯äº‹ä»¶çš„é¡ºåºæ€§å’Œå¹‚ç­‰æ€§ï¼Ÿ", "a": "äº‹ä»¶é©±åŠ¨", "hints": ["é¡ºåºæ€§", "å¹‚ç­‰æ€§"]},
        {"q": "è®¾è®¡ä¸€ä¸ªæ”¯æŒ100ä¸‡QPSçš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼šéœ€è¦å“ªäº›ç»„ä»¶ï¼Ÿå¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ", "a": "ç™¾ä¸‡QPS", "hints": ["QPS", "é«˜å¯ç”¨", "ç™¾ä¸‡"]},
        
        # ğŸ“ˆ ç»æµå­¦æŒ‘æˆ˜
        {"q": "æœ‰æ•ˆå¸‚åœºå‡è¯´(EMH)çš„ä¸‰ç§å½¢å¼æ˜¯ä»€ä¹ˆï¼Ÿè¡Œä¸ºé‡‘èå­¦å¦‚ä½•æŒ‘æˆ˜å®ƒï¼Ÿ", "a": "æœ‰æ•ˆå¸‚åœº", "hints": ["æœ‰æ•ˆå¸‚åœº", "è¡Œä¸ºé‡‘è"]},
        {"q": "ISAS-ADæ¨¡å‹çš„æ ¹æœ¬-LMæ¨¡å‹å’ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ", "a": "IS-LM vs AS-AD", "hints": ["IS-LM", "AS-AD"]},
        
        # ğŸ’» ç®—æ³•æŒ‘æˆ˜
        {"q": "ç”¨Pythonå®ç°LRUç¼“å­˜æ·˜æ±°ç®—æ³•ï¼Œè¦æ±‚O(1)æ—¶é—´å¤æ‚åº¦çš„getå’Œputæ“ä½œ", "a": "LRUç¼“å­˜", "hints": ["LRU", "O(1)", "ç¼“å­˜"]},
        
        # ğŸ“ æ–‡å­¦æŒ‘æˆ˜
        {"q": "èµæç‹ç»´ã€Šé€å…ƒäºŒä½¿å®‰è¥¿ã€‹ï¼šæ¸­åŸæœé›¨æµ¥è½»å°˜ï¼Œå®¢èˆé’é’æŸ³è‰²æ–°ã€‚åŠå›æ›´å°½ä¸€æ¯é…’ï¼Œè¥¿å‡ºé˜³å…³æ— æ•…äºº", "a": "é€åˆ«è¯—", "hints": ["é€å…ƒäºŒ", "ç‹ç»´", "é€åˆ«"]},
    ]
    
    print(f"\nğŸ¯ ç»ˆææŒ‘æˆ˜ {len(challenges)} é“é«˜éš¾åº¦é¢˜ç›®:")
    print("-"*80)
    
    results = {"perfect": 0, "partial": 0, "failed": 0}
    
    for i, c in enumerate(challenges, 1):
        result = engine.analyze(c["q"])
        
        # è¯„åˆ†
        has_hints = sum(1 for h in c["hints"] if h in result["answer"])
        coverage = has_hints / len(c["hints"])
        
        if coverage >= 0.8:
            status = "âœ…å®Œç¾"
            results["perfect"] += 1
        elif coverage >= 0.5:
            status = "âš ï¸éƒ¨åˆ†"
            results["partial"] += 1
        else:
            status = "âŒå¤±è´¥"
            results["failed"] += 1
        
        print(f"\n{i:2d}. {c['a'][:25]:25s} {status}")
        print(f"    è¦†ç›–ç‡: {coverage*100:.0f}% | ç½®ä¿¡åº¦: {result['confidence']*100:.0f}%")
    
    total = len(challenges)
    passed = results["perfect"] + results["partial"]
    score = (passed / total) * 100
    
    print("\n" + "="*80)
    print("ğŸ“Š ç»ˆææŒ‘æˆ˜èµ›ç»“æœ v14.1")
    print("="*80)
    
    print(f"\næ€»é¢˜æ•°: {total}")
    print(f"å®Œç¾å›ç­”: {results['perfect']}")
    print(f"éƒ¨åˆ†å›ç­”: {results['partial']}")
    print(f"å¤±è´¥: {results['failed']}")
    print(f"\né€šè¿‡ç‡: {score:.1f}%")
    print(f"å®Œç¾ç‡: {(results['perfect']/total)*100:.1f}%")
    
    # è¯„çº§
    print("\n" + "="*80)
    print("ğŸ† æœ€ç»ˆè¯„çº§")
    print("="*80)
    
    if score >= 90 and results["perfect"] >= 15:
        rating = "ğŸ¦„ğŸ¦„ğŸ¦„ GOD TIER"
    elif score >= 85:
        rating = "ğŸ¦„ğŸ¦„ Super Unicorn"
    elif score >= 75:
        rating = "ğŸ¦„ Unicorn Mode+"
    else:
        rating = "ğŸ¦„ Unicorn Mode"
    
    print(f"\nå¾—åˆ†: {score:.1f}%")
    print(f"è¯„çº§: {rating}")
    
    # è¿›åŒ–å¯¹æ¯”
    print("\n" + "="*80)
    print("ğŸ“ˆ è¿›åŒ–å¯¹æ¯”")
    print("="*80)
    
    print("\nv14.0 åŸå§‹ç‰ˆ:")
    print("  é€šè¿‡ç‡: 47.6%")
    print("  å®Œç¾ç‡: 19.0%")
    
    print(f"\nv14.1 å¼ºåŒ–ç‰ˆ:")
    print(f"  é€šè¿‡ç‡: {score:.1f}%")
    print(f"  å®Œç¾ç‡: {(results['perfect']/total)*100:.1f}%")
    
    improvement = score - 47.6
    print(f"\næå‡: +{improvement:.1f}%")
    
    if improvement > 20:
        print("\nğŸ‰ é‡å¤§çªç ´ï¼")
    
    print("\n" + "="*80)
    
    return score


if __name__ == "__main__":
    run_challenge()
